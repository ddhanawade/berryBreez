<div class="cart-page">
  <!-- Page Header -->
  <section class="page-header">
    <div class="container">
      <h1 class="page-title">Shopping Cart</h1>
      <p class="page-subtitle" *ngIf="cartItems.length > 0">{{ cartItems.length }} item(s) in your cart</p>
      
      <!-- Breadcrumb (Desktop Only) -->
      <nav class="breadcrumb hide-mobile">
        <a routerLink="/">Home</a>
        <span class="separator">‚Ä∫</span>
        <a routerLink="/products">Products</a>
        <span class="separator">‚Ä∫</span>
        <span class="current">Cart</span>
      </nav>
    </div>
  </section>

  <div class="cart-container container">
    <!-- Empty Cart State -->
    <div *ngIf="cartItems.length === 0" class="empty-cart">
      <div class="empty-cart-icon">
        <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="9" cy="21" r="1" stroke-width="2"/>
          <circle cx="20" cy="21" r="1" stroke-width="2"/>
          <path d="M1 1H5L7.68 14.39C7.77 14.83 8.17 15.17 8.62 15.17H19.4C19.85 15.17 20.25 14.83 20.34 14.39L22 6H6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h2>Your cart is empty</h2>
      <p>Add some fresh products from Mahabaleshwar to get started!</p>
      <a routerLink="/products" class="btn-primary">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M15 18L9 12L15 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Continue Shopping
      </a>
    </div>

    <!-- Cart Items -->
    <div *ngIf="cartItems.length > 0" class="cart-content">
      <!-- Cart Items List -->
      <div class="cart-items">
        <div class="cart-header">
          <h2>Cart Items</h2>
          <button (click)="clearCart()" class="clear-cart-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="3 6 5 6 21 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M19 6V20C19 21 18 22 17 22H7C6 22 5 21 5 20V6M8 6V4C8 3 9 2 10 2H14C15 2 16 3 16 4V6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Clear Cart
          </button>
        </div>

        <div class="items-list">
          <div *ngFor="let item of cartItems" class="cart-item">
            <div class="item-image">
              <img [src]="item.product.images[0]" [alt]="item.product.name" />
              <div class="item-badges">
                <span *ngIf="item.product.discount" class="badge discount-badge">
                  -{{ item.product.discount }}%
                </span>
                <span *ngIf="item.product.isOrganic" class="badge organic-badge">
                  üåø
                </span>
              </div>
            </div>

            <div class="item-details">
              <div class="item-info">
                <h3 class="item-name">{{ item.product.name }}</h3>
                <p class="item-category">{{ item.product.category }}</p>
                <div class="item-meta">
                  <span class="item-rating">‚≠ê {{ item.product.rating }}</span>
                  <span class="item-unit">{{ item.product.unit }}</span>
                </div>
              </div>

              <div class="item-actions">
                <div class="quantity-controls">
                  <button 
                    (click)="decreaseQuantity(item)" 
                    class="qty-btn"
                    [disabled]="item.quantity <= 1">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <line x1="5" y1="12" x2="19" y2="12" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                  </button>
                  <span class="quantity">{{ item.quantity }}</span>
                  <button (click)="increaseQuantity(item)" class="qty-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <line x1="12" y1="5" x2="12" y2="19" stroke-width="2" stroke-linecap="round"/>
                      <line x1="5" y1="12" x2="19" y2="12" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                  </button>
                </div>

                <div class="item-pricing">
                  <span class="item-price">‚Çπ{{ item.product.price * item.quantity }}</span>
                  <span class="item-unit-price">‚Çπ{{ item.product.price }} each</span>
                </div>

                <button (click)="removeItem(item.product.id)" class="remove-btn">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <polyline points="3 6 5 6 21 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M19 6V20C19 21 18 22 17 22H7C6 22 5 21 5 20V6M8 6V4C8 3 9 2 10 2H14C15 2 16 3 16 4V6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="10" y1="11" x2="10" y2="17" stroke-width="2" stroke-linecap="round"/>
                    <line x1="14" y1="11" x2="14" y2="17" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                  Remove
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="order-summary">
        <div class="summary-card">
          <h2 class="summary-title">Order Summary</h2>
          
          <div class="summary-details">
            <div class="summary-row">
              <span class="label">Subtotal</span>
              <span class="value">‚Çπ{{ subtotal }}</span>
            </div>
            
            <div class="summary-row" *ngIf="discount > 0">
              <span class="label">Discount</span>
              <span class="value discount">-‚Çπ{{ discount }}</span>
            </div>
            
            <div class="summary-row">
              <span class="label">Delivery Charge</span>
              <span class="value" [class.free]="deliveryCharge === 0">
                {{ deliveryCharge === 0 ? 'FREE' : '‚Çπ' + deliveryCharge }}
              </span>
            </div>

            <div class="summary-divider"></div>
            
            <div class="summary-row total">
              <span class="label">Total</span>
              <span class="value">‚Çπ{{ total }}</span>
            </div>
          </div>

          <div class="delivery-info" *ngIf="subtotal >= 500">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-width="2"/>
              <polyline points="12 6 12 12 16 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Free delivery on orders above ‚Çπ500</span>
          </div>

          <div class="delivery-info warning" *ngIf="subtotal < 500">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-width="2"/>
              <line x1="12" y1="8" x2="12" y2="12" stroke-width="2" stroke-linecap="round"/>
              <line x1="12" y1="16" x2="12.01" y2="16" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span>Add ‚Çπ{{ 500 - subtotal }} more for free delivery</span>
          </div>

          <button routerLink="/checkout" class="checkout-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="1" y="4" width="22" height="16" rx="2" ry="2" stroke-width="2"/>
              <line x1="1" y1="10" x2="23" y2="10" stroke-width="2"/>
            </svg>
            Proceed to Checkout
          </button>

          <a routerLink="/products" class="continue-shopping">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M15 18L9 12L15 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Continue Shopping
          </a>
        </div>

        <!-- Trust Badges -->
        <div class="trust-badges">
          <div class="badge-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 22C12 22 20 18 20 12V5L12 2L4 5V12C4 18 12 22 12 22Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Secure Payment</span>
          </div>
          <div class="badge-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M16 21V5C16 4.46957 15.7893 3.96086 15.4142 3.58579C15.0391 3.21071 14.5304 3 14 3H10C9.46957 3 8.96086 3.21071 8.58579 3.58579C8.21071 3.96086 8 4.46957 8 5V21M4 7H20M4 7C2.89543 7 2 7.89543 2 9V19C2 20.1046 2.89543 21 4 21H20C21.1046 21 22 20.1046 22 19V9C22 7.89543 21.1046 7 20 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Fresh Products</span>
          </div>
          <div class="badge-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-width="2"/>
              <polyline points="12 6 12 12 16 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Fast Delivery</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Bottom Navigation -->
  <nav class="mobile-bottom-nav hide-desktop">
    <a routerLink="/" class="nav-item" [class.active]="activeBottomTab === 'home'" (click)="setBottomTab('home')">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke-width="2"/>
        <path d="M9 22V12H15V22" stroke-width="2"/>
      </svg>
      <span>Home</span>
    </a>
    
    <a routerLink="/products" class="nav-item" [class.active]="activeBottomTab === 'products'" (click)="setBottomTab('products')">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <rect x="3" y="3" width="7" height="7" stroke-width="2"/>
        <rect x="14" y="3" width="7" height="7" stroke-width="2"/>
        <rect x="3" y="14" width="7" height="7" stroke-width="2"/>
        <rect x="14" y="14" width="7" height="7" stroke-width="2"/>
      </svg>
      <span>Products</span>
    </a>
    
    <a routerLink="/cart" class="nav-item active" [class.active]="activeBottomTab === 'cart'" (click)="setBottomTab('cart')">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="9" cy="21" r="1" stroke-width="2"/>
        <circle cx="20" cy="21" r="1" stroke-width="2"/>
        <path d="M1 1H5L7.68 14.39C7.77 14.83 8.17 15.17 8.62 15.17H19.4C19.85 15.17 20.25 14.83 20.34 14.39L22 6H6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span>Cart</span>
      <span *ngIf="cartItems.length > 0" class="cart-count">{{ cartItems.length }}</span>
    </a>
    
    <a routerLink="/profile" class="nav-item" [class.active]="activeBottomTab === 'profile'" (click)="setBottomTab('profile')">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <circle cx="12" cy="7" r="4" stroke-width="2"/>
      </svg>
      <span>Profile</span>
    </a>
  </nav>
</div>
