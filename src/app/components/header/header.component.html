<header class="header">
  <div class="header-container">
    <!-- Logo and Brand -->
    <div class="brand">
      <a routerLink="/" class="logo-link">
        <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="currentColor" opacity="0.3"/>
          <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="brand-name">BerryBreez</span>
      </a>
      <span class="brand-tagline">Fresh from Mahabaleshwar</span>
    </div>

    <!-- Desktop Navigation -->
    <nav class="desktop-nav hide-mobile">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">
        Home
      </a>
      <a routerLink="/products" routerLinkActive="active" class="nav-link">
        Products
      </a>
      <a routerLink="/seller" routerLinkActive="active" class="nav-link">
        Sell Products
      </a>
    </nav>

    <!-- Actions -->
    <div class="header-actions">
      <!-- Search (Desktop) -->
      <div class="search-box hide-mobile">
        <input 
          type="text" 
          placeholder="Search fresh products..." 
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()"
          class="search-input"
        />
        <button (click)="onSearch()" class="search-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <circle cx="11" cy="11" r="8" stroke-width="2"/>
            <path d="M21 21L16.65 16.65" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <!-- Cart -->
      <a routerLink="/cart" class="action-btn cart-btn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="9" cy="21" r="1" stroke-width="2"/>
          <circle cx="20" cy="21" r="1" stroke-width="2"/>
          <path d="M1 1H5L7.68 14.39C7.77 14.83 8.17 15.17 8.62 15.17H19.4C19.85 15.17 20.25 14.83 20.34 14.39L22 6H6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span *ngIf="cartItemCount > 0" class="cart-badge">{{ cartItemCount }}</span>
      </a>

      <!-- User Menu -->
      <div *ngIf="isAuthenticated$ | async; else loginButton" class="user-menu">
        <button class="action-btn user-btn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="7" r="4" stroke-width="2"/>
          </svg>
        </button>
        <div class="user-dropdown">
          <a routerLink="/profile" class="dropdown-item">My Profile</a>
          <a routerLink="/orders" class="dropdown-item">My Orders</a>
          <button (click)="logout()" class="dropdown-item logout-btn">Logout</button>
        </div>
      </div>

      <ng-template #loginButton>
        <a routerLink="/auth" class="btn-primary">
          Login
        </a>
      </ng-template>

      <!-- Mobile Menu Toggle -->
      <button (click)="toggleMobileMenu()" class="mobile-menu-btn hide-desktop">
        <svg *ngIf="!isMobileMenuOpen" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="3" y1="12" x2="21" y2="12" stroke-width="2" stroke-linecap="round"/>
          <line x1="3" y1="6" x2="21" y2="6" stroke-width="2" stroke-linecap="round"/>
          <line x1="3" y1="18" x2="21" y2="18" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <svg *ngIf="isMobileMenuOpen" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <line x1="18" y1="6" x2="6" y2="18" stroke-width="2" stroke-linecap="round"/>
          <line x1="6" y1="6" x2="18" y2="18" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div class="mobile-menu hide-desktop" [class.open]="isMobileMenuOpen">
    <div class="mobile-search">
      <input 
        type="text" 
        placeholder="Search products..." 
        [(ngModel)]="searchQuery"
        (keyup.enter)="onSearch()"
        class="search-input"
      />
      <button (click)="onSearch()" class="search-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <circle cx="11" cy="11" r="8" stroke-width="2"/>
          <path d="M21 21L16.65 16.65" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
    
    <nav class="mobile-nav">
      <a routerLink="/" (click)="toggleMobileMenu()" class="mobile-nav-link">Home</a>
      <a routerLink="/products" (click)="toggleMobileMenu()" class="mobile-nav-link">Products</a>
      <a routerLink="/seller" (click)="toggleMobileMenu()" class="mobile-nav-link">Sell Products</a>
      
      <div *ngIf="isAuthenticated$ | async" class="mobile-user-links">
        <a routerLink="/profile" (click)="toggleMobileMenu()" class="mobile-nav-link">My Profile</a>
        <a routerLink="/orders" (click)="toggleMobileMenu()" class="mobile-nav-link">My Orders</a>
        <button (click)="logout()" class="mobile-nav-link logout-link">Logout</button>
      </div>
    </nav>
  </div>
</header>
